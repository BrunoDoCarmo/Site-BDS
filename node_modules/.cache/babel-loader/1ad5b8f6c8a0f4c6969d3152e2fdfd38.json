{"remainingRequest":"C:\\projetos\\Site\\BDS\\node_modules\\babel-loader\\lib\\index.js!C:\\projetos\\Site\\BDS\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!C:\\projetos\\Site\\BDS\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\projetos\\Site\\BDS\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\projetos\\Site\\BDS\\src\\components\\AppClientsItem.vue?vue&type=template&id=1b8c418a","dependencies":[{"path":"C:\\projetos\\Site\\BDS\\src\\components\\AppClientsItem.vue","mtime":1639676474946},{"path":"C:\\projetos\\Site\\BDS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639154100980},{"path":"C:\\projetos\\Site\\BDS\\node_modules\\babel-loader\\lib\\index.js","mtime":1639164202339},{"path":"C:\\projetos\\Site\\BDS\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1639164206112},{"path":"C:\\projetos\\Site\\BDS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1639154100980},{"path":"C:\\projetos\\Site\\BDS\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1639164203920}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnN0aWNreS5qcyI7CmltcG9ydCB7IHJlbmRlclNsb3QgYXMgX3JlbmRlclNsb3QsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jayB9IGZyb20gInZ1ZSI7CmV4cG9ydCBmdW5jdGlvbiByZW5kZXIoX2N0eCwgX2NhY2hlLCAkcHJvcHMsICRzZXR1cCwgJGRhdGEsICRvcHRpb25zKSB7CiAgcmV0dXJuIF9vcGVuQmxvY2soKSwgX2NyZWF0ZUJsb2NrKCJkaXYiLCB7CiAgICBjbGFzczogX2N0eC4kc3R5bGUuY29udGFpbmVyLAogICAgcmVmOiAiY29udGFpbmVyIgogIH0sIFtfY3JlYXRlVk5vZGUoImRpdiIsIHsKICAgIGNsYXNzOiBfY3R4LiRzdHlsZS5zdGlja3kKICB9LCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgICBjbGFzczogX2N0eC4kc3R5bGUubmF2LAogICAgcmVmOiAibmF2IgogIH0sIFtfcmVuZGVyU2xvdChfY3R4LiRzbG90cywgIm5hdiIpXSwgMgogIC8qIENMQVNTICovCiAgKSwgX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgICBjbGFzczogX2N0eC4kc3R5bGUuc2xpZGVyLAogICAgcmVmOiAic2xpZGVyIgogIH0sIFtfcmVuZGVyU2xvdChfY3R4LiRzbG90cywgImRlZmF1bHQiKV0sIDIKICAvKiBDTEFTUyAqLwogICldLCAyCiAgLyogQ0xBU1MgKi8KICApXSwgMgogIC8qIENMQVNTICovCiAgKTsKfQ=="},{"version":3,"sources":["C:\\projetos\\Site\\BDS\\src\\components\\AppClientsItem.vue"],"names":[],"mappings":";;;uBA6BE,YAAA,CAUM,KAVN,EAUM;AAVA,IAAA,KAAK,EAAE,IAAA,CAAA,MAAA,CAAO,SAUd;AAVyB,IAAA,GAAG,EAAC;AAU7B,GAVN,E,CACE,YAAA,CAQM,KARN,EAQM;AARA,IAAA,KAAK,EAAE,IAAA,CAAA,MAAA,CAAO;AAQd,GARN,E,CACE,YAAA,CAEM,KAFN,EAEM;AAFA,IAAA,KAAK,EAAE,IAAA,CAAA,MAAA,CAAO,GAEd;AAFmB,IAAA,GAAG,EAAC;AAEvB,GAFN,E,CACE,WAAA,CAAmB,IAAA,CAAA,MAAnB,EAAmB,KAAnB,C,CADF,E;;AAAA,G,EAIA,YAAA,CAEM,KAFN,EAEM;AAFA,IAAA,KAAK,EAAE,IAAA,CAAA,MAAA,CAAO,MAEd;AAFsB,IAAA,GAAG,EAAC;AAE1B,GAFN,E,CACE,WAAA,CAAQ,IAAA,CAAA,MAAR,EAAQ,SAAR,C,CADF,E;;AAAA,G,CALF,E;;AAAA,G,CADF,E;;AAAA,G","sourcesContent":["Skip to content\r\nSearch or jump to…\r\nPull requests\r\nIssues\r\nMarketplace\r\nExplore\r\n \r\n@BrunoDoCarmo \r\nvit330\r\n/\r\nvue-sticky-slider\r\nPublic\r\nCode\r\nIssues\r\nPull requests\r\nActions\r\nProjects\r\nWiki\r\nSecurity\r\nInsights\r\nvue-sticky-slider/index.vue\r\n\r\nvit init\r\nLatest commit 8ae89c5 21 days ago\r\n History\r\n 0 contributors\r\n221 lines (188 sloc)  6.21 KB\r\n   \r\n<template>\r\n  <div :class=\"$style.container\" ref=\"container\">\r\n    <div :class=\"$style.sticky\">\r\n      <div :class=\"$style.nav\" ref=\"nav\">\r\n        <slot name=\"nav\" />\r\n      </div>\r\n\r\n      <div :class=\"$style.slider\" ref=\"slider\">\r\n        <slot />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'UiStickySlider',\r\n  props: {\r\n    /** Размер шага translateY при наложении слайдов */\r\n    transformSize: {\r\n      type: Number,\r\n      default: 0.5\r\n    },\r\n    /** Размер шага scale при наложении слайдов */\r\n    scaleSize: {\r\n      type: Number,\r\n      default: 0.05\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      /** Ссылка на слайды */\r\n      slides: [],\r\n      /** Ссылка на кнопку \"назад\" */\r\n      prevNav: null,\r\n      /** Ссылка на кнопку \"вперёд\" */\r\n      nextNav: null,\r\n      /** Величина прокрутки слайдера */\r\n      containerOffset: 0,\r\n      /** Высота окна */\r\n      windowHeight: 0,\r\n      /** Множитель скорости прокрутки слайдов */\r\n      speedFactor: 0,\r\n      /** Номер верхнего слайда */\r\n      topSlideNumber: 0\r\n    }\r\n  },\r\n  computed: {\r\n    activeIndex() {\r\n      const index = Math.floor((this.containerOffset + 1) / this.windowHeight)\r\n      return (index < 0) ? 0 : index\r\n    }\r\n  },\r\n  methods: {\r\n    /** Инициализация. Устанавливает высоту контейнера, вычисляет множитель скорости, записывает слайды и кнопки навигации */\r\n    init() {\r\n      const sliderRect = this.$refs.slider.getBoundingClientRect()\r\n      this.slides = [...this.$refs.slider.children].reverse()\r\n      this.windowHeight = window.innerHeight\r\n      this.$refs.container.style.height = `${this.windowHeight * this.slides.length}px`\r\n      this.speedFactor = sliderRect.right / this.windowHeight\r\n      this.prevNav = this.$refs.nav.children[0]\r\n      this.nextNav = this.$refs.nav.children[1]\r\n      this.onScroll()\r\n    },\r\n    /** Устанавливает значение прокрутки слайдера */\r\n    setOffset() {\r\n      const containerRect = this.$refs.container.getBoundingClientRect()\r\n      if (containerRect.top > 0) {\r\n        this.containerOffset = 0\r\n        return\r\n      }\r\n      if (-containerRect.top > containerRect.height - this.windowHeight) {\r\n        this.containerOffset = containerRect.height - this.windowHeight\r\n        return\r\n      }\r\n      this.containerOffset = -containerRect.top\r\n    },\r\n    /** Анимация слайдов. Устанавливает положение и трансформации наложения слайдов */\r\n    moveSlides() {\r\n      this.slides.forEach((slide, index) => {\r\n        const realOffset = -this.containerOffset * this.speedFactor + (this.windowHeight * this.speedFactor * index) - 1\r\n        const offset = (realOffset < -1) ? realOffset : 0\r\n        slide.style.transform = `translateX(${offset}px)`\r\n        const slideRect = slide.getBoundingClientRect()\r\n        const nextSlide = slide.previousElementSibling\r\n        const nextScaleElement = nextSlide?.firstElementChild\r\n        if (-offset > slideRect.width) {\r\n          if (nextScaleElement) {\r\n            nextScaleElement.style.transform = `none`\r\n          }\r\n          this.topSlideNumber = index + 1\r\n        } else {\r\n          if (nextScaleElement) {\r\n            const offsetY = (index + 1 - this.topSlideNumber) * this.transformSize * -1\r\n            const scale = 1 - (index + 1 - this.topSlideNumber) * this.scaleSize\r\n            nextScaleElement.style.transform = `translateY(${offsetY}rem) scale(${scale})`\r\n          }\r\n          if (index === 0) {\r\n            this.topSlideNumber = 0\r\n          }\r\n        }\r\n      })\r\n    },\r\n    /**\r\n     * Прокручивает страницу\r\n     * @param {number} offset Величина прокрутки\r\n     */\r\n    scrollTo(offset) {\r\n      this.$scroll.scrollTo({\r\n        y: offset,\r\n        duration: 600\r\n      })\r\n    },\r\n    /** Обработчик события прокрутки */\r\n    onScroll() {\r\n      requestAnimationFrame(() => {\r\n        this.setOffset()\r\n        this.moveSlides()\r\n        this.checkNavDisabled()\r\n      })\r\n    },\r\n    /** Обработчик клика на кнопку \"назад\" */\r\n    onPrevClick() {\r\n      const containerRect = this.$refs.container.getBoundingClientRect()\r\n      if (-containerRect.top < this.windowHeight) {\r\n        this.scrollTo(containerRect.top)\r\n        return\r\n      }\r\n      const offset = containerRect.top + this.windowHeight * (this.activeIndex - 1)\r\n      this.scrollTo(offset)\r\n    },\r\n    /** Обработчик клика на кнопку \"вперёд\" */\r\n    onNextClick() {\r\n      const containerRect = this.$refs.container.getBoundingClientRect()\r\n      const offset = containerRect.top + this.windowHeight * (this.activeIndex + 1) + 1\r\n      this.scrollTo(offset)\r\n    },\r\n    /** Проверяет величину прокрутки слайдера и отключает кнопки навигации */\r\n    checkNavDisabled() {\r\n      const containerRect = this.$refs.container.getBoundingClientRect()\r\n      if (this.prevNav) {\r\n        this.prevNav.disabled = this.containerOffset <= 0\r\n      }\r\n      if (this.nextNav) {\r\n        this.nextNav.disabled = this.containerOffset >= containerRect.height - this.windowHeight\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init()\r\n    window.addEventListener('scroll', this.onScroll)\r\n    this.prevNav?.addEventListener('click', this.onPrevClick)\r\n    this.nextNav?.addEventListener('click', this.onNextClick)\r\n  },\r\n  beforeDestroy() {\r\n    window.removeEventListener('scroll', this.onScroll)\r\n    this.prevNav?.removeEventListener('click', this.onPrevClick)\r\n    this.nextNav?.removeEventListener('click', this.onNextClick)\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" module>\r\n.container {\r\n  position: relative;\r\n}\r\n.sticky {\r\n  position: sticky;\r\n  top: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: vh(100);\r\n}\r\n.slider {\r\n  position: relative;\r\n  > * {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    will-change: transform;\r\n    &:last-child {\r\n      position: relative;\r\n    }\r\n  }\r\n}\r\n</style>"],"sourceRoot":""}]}